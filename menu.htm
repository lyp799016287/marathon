<script type="text/javascript" src="/res/js/bootstrap.min.js"></script>
<header>
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button aria-controls="navbar" aria-expanded="false" data-target="#navbar" data-toggle="collapse" class="navbar-toggle collapsed" type="button">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="javascript:void(0);" class="navbar-brand">医道后台管理系统</a>
			</div>
			<div class="navbar-collapse collapse" id="navbar">
				<ul class="nav navbar-nav" id="menu_list">
					<!--<li class="dropdown">
						<a aria-expanded="false" aria-haspopup="true" role="button" data-toggle="dropdown" class="dropdown-toggle" href="/">
							<span aria-hidden="true" class="glyphicon glyphicon-home"></span>首页
						</a>
					</li>
							
					<li class="dropdown">
						<a aria-expanded="false" aria-haspopup="true" role="button" data-toggle="dropdown" class="dropdown-toggle" href="#">
							<span aria-hidden="true" class="glyphicon glyphicon-info-sign"></span>信息管理
							<span class="caret"></span>									
						</a>
						<ul class="dropdown-menu">
							<li><a href="#">原创文章</a></li>
							<li><a href="#">首页轮播</a></li>
							<li><a href="#">密贴管理</a></li>
							<li><a href="#">密贴举报</a></li>
						</ul>
					</li>
							
					<li class="dropdown">
						<a aria-expanded="false" aria-haspopup="true" role="button" data-toggle="dropdown" class="dropdown-toggle" href="#">
							<span aria-hidden="true" class="glyphicon glyphicon-user"></span>用户管理
							<span class="caret"></span>									
						</a>
						<ul class="dropdown-menu">
							<li><a href="#">用户列表</a></li>
							<li><a href="#">用户审核</a></li>
						</ul>
					</li>
							
					<li class="dropdown">
						<a aria-expanded="false" aria-haspopup="true" role="button" data-toggle="dropdown" class="dropdown-toggle" href="#">
							<span aria-hidden="true" class="glyphicon glyphicon-equalizer"></span>数据分析
							<span class="caret"></span>									
						</a>
						<ul class="dropdown-menu">
							<li><a href="#">资讯分析</a></li>
							<li><a href="#">接口监控</a></li>
							<li><a href="#">用户画像</a></li>
							<li><a href="#">用户分析</a></li>
						</ul>
					</li>
							
					<li class="dropdown">
						<a aria-expanded="false" aria-haspopup="true" role="button" data-toggle="dropdown" class="dropdown-toggle" href="#">
							<span aria-hidden="true" class="glyphicon glyphicon-cog"></span>系统管理
							<span class="caret"></span>									
						</a>
						<ul class="dropdown-menu">
							<li><a href="#">后台用户管理</a></li>
							<li><a href="#">权限管理</a></li>
							<li><a href="#">菜单管理</a></li>
						</ul>
					</li>
					-->			
				</ul>
				<ul class="nav navbar-nav navbar-right" id="menu-right">
					<li class="">
						<a href="javascript:void(0);">
							<span aria-hidden="true" class="glyphicon glyphicon-off logout"></span>
							退出
						</a>
					</li>
				</ul>
			</div>
			<!--/.nav-collapse -->
		</div>
	</nav>
</header>

<script type="text/javascript">
	var menu = {};
	menu.init = function(){		
		$.ajax({
			type : 'POST',
			url : '/login/login/getmenu/',
			dataType : 'json',
			success: function(rdata) {
				if(rdata.code == 1){
					menu.makeMenu(rdata.data);
				}
			},
			error: function() {
				alert("接口调用失败");
			}
		});
	}

	menu.makeMenu = function(data){
		var hml = '';
		for(var i=0; i< data.length; i++){
			hml += '<li class="dropdown"><a aria-expanded="false" aria-haspopup="true" role="button" data-toggle="dropdown" class="dropdown-toggle" href="/"><span aria-hidden="true" class="glyphicon '+data[i]['icon']+'"></span>'+data[i]['name'];
			var menu_arr = data[i]['menu'];
			if(menu_arr.length !=0){
				hml += '<span class="caret"></span>';
				hml += '</a><ul class="dropdown-menu">';

				for(var j=0; j < menu_arr.length; j++){
					hml += '<li><a href="'+menu_arr[j]['url']+'">'+menu_arr[j]['name']+'</a></li>';
				}
				hml += '</ul>';
			}	
			hml += '</li>';

		}
		$("#menu_list").empty().html(hml);
	}

	menu.init();
</script>